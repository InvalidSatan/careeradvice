<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sonic-Style Mountain Climber</title>
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@7.x/dist/pixi.min.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; }
        #gameCanvas { display: block; }
    </style>
</head>
<body>
    <div id="gameCanvas"></div>
    <script>
        // Game code will go here
        // Initialize Pixi Application
        const app = new PIXI.Application({
            width: 800,
            height: 600,
            backgroundColor: 0x87CEEB,
        });
        document.getElementById('gameCanvas').appendChild(app.view);

        // Game variables
        const GRAVITY = 0.5;
        const JUMP_FORCE = -12;
        const MOVE_SPEED = 3;

        // Create game containers
        const gameContainer = new PIXI.Container();
        const backgroundContainer = new PIXI.Container();
        const terrainContainer = new PIXI.Container();
        const playerContainer = new PIXI.Container();
        app.stage.addChild(backgroundContainer, terrainContainer, playerContainer, gameContainer);

        // Player
        const player = new PIXI.Graphics();
        player.beginFill(0xFFC520);
        player.drawRect(0, 0, 30, 50);
        player.endFill();
        player.x = 100;
        player.y = app.screen.height - 50;
        player.vy = 0;
        player.jumping = false;
        playerContainer.addChild(player);

        // Terrain
        const terrainWidth = 50000;
        const terrainResolution = 100;
        const terrainPoints = [];
        let terrainGraphics;

        // Game state
        let gameState = 'start';
        let score = 0;
        let cameraX = 0;

        // Generate smooth terrain
        function generateTerrain() {
            terrainPoints.length = 0;
            let y = app.screen.height - 100;

            for (let x = 0; x < terrainWidth; x += terrainResolution) {
                y += (Math.random() - 0.5) * 50;
                y = Math.max(100, Math.min(app.screen.height - 50, y));
                terrainPoints.push(new PIXI.Point(x, y));
            }

            // Ensure the terrain slopes upward overall
            for (let i = 1; i < terrainPoints.length; i++) {
                terrainPoints[i].y = Math.min(terrainPoints[i].y, terrainPoints[i-1].y + 20);
            }
        }

        // Draw terrain
        function drawTerrain() {
            if (terrainGraphics) {
                terrainContainer.removeChild(terrainGraphics);
            }

            terrainGraphics = new PIXI.Graphics();

            // Draw terrain body
            terrainGraphics.beginFill(0x5b3e26);
            terrainGraphics.moveTo(terrainPoints[0].x, app.screen.height);
            terrainPoints.forEach(point => terrainGraphics.lineTo(point.x, point.y));
            terrainGraphics.lineTo(terrainPoints[terrainPoints.length - 1].x, app.screen.height);
            terrainGraphics.endFill();

            // Draw grass
            terrainGraphics.lineStyle(2, 0x2e8b57);
            for (let i = 0; i < terrainPoints.length - 1; i++) {
                const x1 = terrainPoints[i].x;
                const y1 = terrainPoints[i].y;
                const x2 = terrainPoints[i + 1].x;
                const y2 = terrainPoints[i + 1].y;

                for (let j = 0; j < 5; j++) {
                    const x = x1 + (x2 - x1) * (j / 5);
                    const y = y1 + (y2 - y1) * (j / 5);
                    terrainGraphics.moveTo(x, y);
                    terrainGraphics.lineTo(x, y - Math.random() * 5 - 2);
                }
            }

            terrainContainer.addChild(terrainGraphics);
        }

        // Background with parallax effect
        function createBackground() {
            const skyGradient = new PIXI.Graphics();
            skyGradient.beginFill(0x87CEEB);
            skyGradient.drawRect(0, 0, app.screen.width, app.screen.height);
            skyGradient.endFill();
            backgroundContainer.addChild(skyGradient);

            for (let i = 0; i < 3; i++) {
                const mountain = new PIXI.Graphics();
                mountain.beginFill(0x6a8ea6);
                mountain.moveTo(0, app.screen.height);
                for (let x = 0; x <= 600; x++) {
                    const y = Math.sin(x / 100 + i) * 50 + Math.sin(x / 50) * 25;
                    mountain.lineTo(x, app.screen.height - 100 - y);
                }
                mountain.lineTo(600, app.screen.height);
                mountain.endFill();
                mountain.x = i * 500;
                mountain.tint = 0x6a8ea6 - i * 0x111111; // Vary mountain colors slightly
                backgroundContainer.addChild(mountain);
            }
        }

        // Update game state
        function update(delta) {
            if (gameState === 'playing') {
                // Apply gravity
                player.vy += GRAVITY;
                player.y += player.vy;

                // Move player and camera
                player.x += MOVE_SPEED;
                cameraX = player.x - app.screen.width / 3;

                // Check ground collision
                const terrainIndex = Math.floor(player.x / terrainResolution);
                if (terrainIndex >= 0 && terrainIndex < terrainPoints.length) {
                    const groundHeight = terrainPoints[terrainIndex].y;
                    if (player.y + player.height > groundHeight) {
                        player.y = groundHeight - player.height;
                        player.vy = 0;
                        player.jumping = false;
                    }
                }

                // Update camera position
                gameContainer.x = -cameraX;
                backgroundContainer.x = -cameraX * 0.5; // Parallax effect

                // Update score
                score = Math.floor(player.x / 10);
            }
        }

        // Jump function
        function jump() {
            if (gameState === 'start') {
                gameState = 'playing';
            } else if (gameState === 'playing' && !player.jumping) {
                player.vy = JUMP_FORCE;
                player.jumping = true;
            } else if (gameState === 'gameOver') {
                gameState = 'playing';
                player.x = 100;
                player.y = app.screen.height - 50;
                player.vy = 0;
                score = 0;
                cameraX = 0;
            }
        }

        // Setup game
        function setup() {
            createBackground();
            generateTerrain();
            drawTerrain();

            app.ticker.add(update);

            // Event listeners
            window.addEventListener('click', jump);
            window.addEventListener('keydown', (e) => {
                if (e.code === 'Space') {
                    jump();
                }
            });
        }

        // Start the game
        setup();
    </script>
</body>
</html>